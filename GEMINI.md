# 프로젝트 가이드라인

이 문서는 LLM이 프로젝트의 맥락을 정확히 이해하고, 더 효율적이며 프로젝트에 특화된 도움을 제공하도록 돕기 위해 작성되었습니다.

---

## 프로젝트 개요 및 목표

* 프로젝트 이름: 엘라마켓 (Ellamarket)
* 목표: 총판 정책으로 가격을 외부에 공개할 수 없는 제약이 있는 상황에서, 로그인 후에만 가격을 공개하여 일반 소비자에게 독점적인 가성비와 희소성 높은 상품을 제공하는 프리미엄 소매 스토어를 구축합니다. 이를 통해 사용자는 '남다른 득템의 즐거움'을 경험하고, 서비스는 초대 코드 기반의 성장 루프와 공유하기 기능을 통해 신규 사용자를 자연스럽게 유입시킵니다.
* 주요 기능 (MVP): 이 프로젝트가 제공하는 핵심 기능들을 나열합니다. 각 기능에 해당하는 사용자 스토리 ID를 함께 명시하면 LLM이 특정 기능 개발 시 맥락을 이해하는 데 도움이 됩니다.
  * [US-001] 상품 목록 및 상세 페이지 (가격 비공개 버전): 비회원 방문자는 상품 이미지, 상세 설명, 특징, 후기(부분적)를 볼 수 있지만, 가격은 '로그인 후 확인'으로 표시됩니다.
  * [US-002] 간편 회원가입 및 로그인: 이메일/비밀번호 기반 및 소셜 로그인(구글/카카오)을 통해 사용자가 빠르게 회원으로 전환하고 가격 정보를 확인할 수 있습니다.
  * [US-003] 로그인 후 가격 공개 및 구매 기능: 로그인한 회원에게는 상품의 실제 총판 가격(또는 파격가)을 공개하고, 장바구니, 결제, 주문 내역 조회 등 기본적인 이커머스 구매 기능을 제공합니다.
  * [US-004] 관리자 상품 등록 및 주문 관리 시스템 (CMS): 운영자가 상품 정보(이미지, 가격, 설명), 재고를 업로드/수정하고 주문 내역을 관리할 수 있습니다.
  * [US-005] 기본 검색 및 카테고리/필터: 사용자가 상품명 검색, 카테고리 분류, 신상품/인기 상품 등의 필터를 사용하여 원하는 상품을 쉽게 찾을 수 있습니다.
  * [US-006] AI 기반 '숨겨진 보석' 상품 추천 (초기 버전): 로그인한 사용자에게 과거 조회/구매 이력을 기반으로 '엘라마켓이 선정한 숨겨진 보석' 등 AI 큐레이션 상품을 보여줍니다.
  * [US-007] 로그인 후 상품 공유하기 및 추천인 수익 지급: 로그인한 회원은 상품 상세 페이지에서 '공유하기' 버튼을 통해 고유한 링크를 생성하고, 이 링크로 접속한 비회원은 로그인 없이 해당 상품의 가격을 즉시 확인할 수 있습니다. 이 링크를 통해 구매가 발생하면, 공유한 회원에게 구매 금액의 5%가 적립됩니다.
* 프로젝트 깃헙 레포지토리: `https://github.com/0disoft/ellamarket`

---

## 기술 스택 및 환경

* 프론트엔드: SvelteKit
  * 스타일링: Tailwind CSS + shadcn-svelte
  * UI/UX 특징 (선택 사항): 깔끔하면서도 프리미엄하고 신비로운 분위기, 독점적인 '득템' 경험을 시각적으로 강조. 다크 모드 버튼 지원, 글꼴 사이즈 변경(총 9단계, 기본 5단계) 기능 지원.
* 백엔드: ElysiaJS
* 런타임: Bun
* 데이터베이스/BaaS: Supabase
* 배포 환경:
  * 프론트엔드 배포: Cloudflare Pages
  * 백엔드 배포: Render
* 의존성 관리: Bun을 패키지 매니저로 사용하며, 정기적인 의존성 업데이트 및 취약점 검토를 수행합니다.
* 프로젝트 구조: 모노레포 (Monorepo)
  * 설명: 프론트엔드(SvelteKit)와 백엔드(ElysiaJS) 코드를 단일 GitHub 저장소 내에서 관리합니다. 이를 통해 공통 코드 공유, 버전 관리 용이성, 통합된 개발 워크플로우의 이점을 활용합니다.
* 지역화 (l10n, 선택 사항):
  * 다국어 페이지 지원 여부: 지원함 (MVP 이후 고려)
  * 기본 언어: 한국어 (접속 국가 언어로 자동 선택 지원은 MVP 이후 고려)
  * 번역 파일 관리 방식: 수동 준비 (LLM 이용 포함)
* 개발 환경:
  * OS: Windows 11
  * IDE: VS Code
  * 터미널: Git Bash
  * 권장 확장 프로그램: VS Code with Svelte, Tailwind CSS IntelliSense, Prettier, ESLint

---

## 코딩 규칙 및 스타일

* 변수/함수명: 명확하고 의미를 쉽게 유추할 수 있는 이름을 사용합니다. (예: `getData` 대신 `fetchUserProfileData`)
* 코드 라인 길이: 한 줄의 최대 길이는 80자 (띄어쓰기 포함)를 지킵니다. (예외: 긴 URL, 코드 블록, 테이블, 제목)
* 함수 길이: 함수의 최대 길이는 50라인 (주석 및 줄바꿈 포함)을 지킵니다.
* 들여쓰기: 특별한 경우가 아니라면 2칸 공백을 사용합니다.
* 커밋 메시지: Gitmoji 형식을 사용한 영어 코멘트를 작성합니다.
* Single Source of Truth: 서비스 이름, API 엔드포인트, 주요 설정 값 등은 코드 곳곳에 하드코딩하지 않습니다. 모든 설정은 별도의 설정 파일이나 상수 모듈에 모아서, 딱 한 군데만 수정하면 전체에 적용되도록 만듭니다.
* 모듈성: 코드를 작고 응집도 높은 모듈로 분리하여 재사용성과 유지보수성을 높입니다.
* 가독성: 다른 개발자가 코드를 쉽게 이해할 수 있도록 작성합니다.
* 성능: 특히 고빈도 호출이 예상되는 API나 데이터 처리 로직에서는 성능을 최우선으로 고려합니다.
* 보안: 사용자 데이터 보호, 인증/인가, 입력 유효성 검사 등 보안을 항상 염두에 둡니다. (프로젝트 특성에 따른 추가 보안 고려사항 명시 가능: 예: XSS/CSRF 방지, SQL Injection 방지, 비밀번호 해싱)
* 데이터 정확성: 제공되는 데이터(특히 계산 결과)는 최신 법규와 공식 데이터를 기반으로 최대한의 정확성을 보장해야 합니다. 부동 소수점 오류 방지를 위한 정밀한 숫자 연산 라이브러리 사용을 권장합니다.
* 에러 처리: 모든 잠재적인 에러 상황에 대해 견고하고 명확한 에러 처리 로직을 구현합니다. (예: 서버 측 폼 액션에서 `fail` 함수를 사용하여 개발자에게 구체적인 오류 메시지 전달)
* 접근성 (A11y): 웹 애플리케이션 개발 시 웹 접근성 표준을 준수하여 모든 사용자가 쉽게 접근하고 이용할 수 있도록 합니다. (처음부터 강력한 접근성 보장)
* 주석 작성 규칙: 주석은 '왜' 이 코드가 존재하는지, 코드를 변경했다면 '왜' 변경했는지, 특정 비즈니스 논리나 기술적 절충안 등 코드만으로 설명하기 어려운 배경 정보를 제공하는데 사용합니다.
* 마크다운 작성 규칙: 다음은 자주 발생하는 마크다운 오류이므로 항상 유의하여 작성합니다.
  * `MD030/list-marker-space`: 리스트 마커 다음에는 정확히 한 칸의 공백을 사용합니다.
  * `MD022/blanks-around-headings`: 제목(Heading)의 위와 아래에는 항상 한 줄씩 비워둡니다.
  * `MD047/single-trailing-newline`: 파일의 마지막은 항상 하나의 개행 문자로 끝나야 합니다.
  * `MD024/no-duplicate-heading`: 한 문서 내에서 동일한 내용의 제목을 중복으로 사용하지 않습니다.
  * `MD007/ul-indent`: 중첩되지 않은 리스트는 2칸 들여쓰기를 사용합니다.

---

## AI 지식 베이스 및 문서화

LLM의 학습 데이터 한계(Knowledge Cutoff)를 극복하고, 프로젝트의 기술적 맥락과 최신 정보를 정확하게 파악하기 위해 이 중앙화된 지식 베이스를 관리합니다. 코드를 분석하거나 생성할 때, 항상 이 내부 지식 베이스의 문서를 가장 먼저 확인하십시오.

* 위치: LLM과 관련된 모든 문서는 `/.gemini/` 폴더 아래에 중앙화하여 관리합니다.

### 프레임워크 최신 정보 (`/.gemini/.changelogs/` 및 `/.gemini/.context7/`)

* 목적: LLM의 지식 격차를 해소하고, 최신 프레임워크 정보를 효과적으로 활용하기 위해 두 가지 유형의 문서를 관리합니다.
  * `/.gemini/.changelogs/`: 주요 프레임워크의 분기별(예: 25년 상반기, 하반기) 최신 업데이트 중, 반드시 알아야 할 핵심 변경 사항이나 주요 기능 추가 내용을 요약하여 저장합니다.
  * `/.gemini/.context7/`: `Context7` MCP를 통해 방대한 공식 문서를 검색하기 전, 로컬에서 자주 사용하는 기능의 일반적인 사용법이나 코드 스니펫을 빠르게 확인하기 위한 용도로 사용됩니다.
* LLM 활용 가이드:
  * 프레임워크의 최신 버전과 관련된 작업을 수행할 때는 먼저 `/.gemini/.changelogs/` 폴더를 확인하여 중요한 변경 사항(breaking changes 등)을 코드에 반영하십시오.
  * 특정 기능의 기본적인 사용법이나 예제가 필요할 때는 `/.gemini/.context7/` 폴더의 문서를 우선적으로 참조하여 빠르게 정보를 얻고, 더 상세한 내용이 필요할 경우에 `Context7` MCP를 활용하십시오.

---

## LLM과의 협업

* LLM이 문제 해결을 완료하고 사용자로부터 긍정적인 응답을 받으면, `.gemini/.commitmsg.txt` 파일에 Gitmoji 형식의 영어 커밋 메시지를 작성합니다.
* LLM이 작업을 완료하고 사용자로부터 긍정적인 응답을 받으면, `.gemini/tasks/` 폴더에 상세 작업 기록을 Markdown 파일로 작성합니다. 상세 형식은 `.gemini/tasks/task_record_example.md` 파일을 참조하십시오.
* LLM의 답변(응답)은 한국어로 합니다.
* 폴더명과 파일명은 영어로 작성해야 합니다.
* 변수명, 클래스명 등은 영어로 작성해야 합니다.
* 코드 주석은 한국어로 작성합니다.
* 오류 로그는 한국어로 작성합니다.
* 홈페이지에 표시되는 메시지나 서비스를 이용하게 될 사용자와의 상호작용 메시지는 페이지의 기본 언어 설정 및 다국어 지원 여부에 따라 적절한 언어(예: 영어 또는 한국어)로 작성합니다.
